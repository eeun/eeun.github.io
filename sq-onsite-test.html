<!DOCTYPE html>
<html>
	<head>
		<title>Spatial Quotient Test</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<style type="text/css">
			.success{color:green}
			.error{color:red}
		</style>
	</head>
	<body>
		<ul>
			<li id="sqdashboard">sqdashboard.com <span>...</span></li>
			<li id="apisqdashboard">api.sqdashboard.com <span>...</span></li>
			<li id="api">api.pathwai.sq-index.com <span>...</span></li>
			<li id="cognito">cognito <span>...</span></li>
		</ul>
	<script>
		function setWorking(id, success, message){
			var li = document.querySelector('#'+id);
			var span = li.querySelector('span');
			span.innerText = success ? 'success' : message || 'error';
			li.className = success ? 'success' : 'error';
		}
		function testImage(id, url){
			var tester=new Image();
			tester.onload=function(){setWorking(id, true)};
			tester.onerror=function(){setWorking(id, false)};
			tester.src=url;
		}
		function testFetch(id, url, code){
			code = code || 200;
			fetch(url).then(function(e){
				if (code == e.status)
					setWorking(id, true);
				else
					setWorking(id, false, e);
			}).catch(function(e){
				setWorking(id, false, e)
			})
		}
		testImage('sqdashboard', 'https://sqdashboard.com/favicon.ico?' +Math.random());
		testFetch('apisqdashboard', 'https://api.sqdashboard.com:1443/project/0');
		testFetch('api', 'https://api.pathwai.sq-index.com/api/me', 401);
		testFetch('cognito', 'https://cognito-idp.us-east-1.amazonaws.com/us-east-1_NBjw0dJak/.well-known/jwks.json');
	</script>

	</body>
	
</html>
