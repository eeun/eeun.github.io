<html>
<head>
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
</head>
<body>
<main>
    <dl>
        <dt>Is running in the Android app?</dt>
        <dd id="is_android">No</dd>

        <dt>Has location permissions?</dt>
        <dd id="has_location">&dash;</dd>

        <dt>Has camera permissions?</dt>
        <dd id="has_camera">&dash;</dd>
    </dl>
    <p>
        <button onclick="FilmlyAndroidApp.requestPermission(false, true)">
            Request Location Permission
        </button>
    </p>
    <p>
        <button onclick="FilmlyAndroidApp.requestPermission(true, false)">
            Request Camera Permission
        </button>
    </p>
    <p>
        <button onclick="FilmlyAndroidApp.requestPermission(true, true)">
            Request Both Permissions
        </button>
    </p>
</main>

<script type="text/javascript">

    var isRunningInFilmlyApp = window.FilmlyAndroidApp !== undefined;

    if (isRunningInFilmlyApp) {
        var timer = setInterval(function() {
            var hasCameraPermission = FilmlyAndroidApp.hasCameraPermission(),
                hasLocationPermission = FilmlyAndroidApp.hasLocationPermission();

            document.getElementById('has_camera').innerText = hasCameraPermission ? 'Yes' : 'No';
            document.getElementById('has_location').innerText = hasLocationPermission ? 'Yes' : 'No';

            if (hasCameraPermission && hasLocationPermission) {
                clearInterval(timer);
                // we have the permissions we need now!
            }
        }, 500);
    }

    document.getElementById('is_android').innerText = isRunningInFilmlyApp ? 'Yes' : 'No';

</script>
</body>
</html>
